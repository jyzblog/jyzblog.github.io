(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[961],{4478:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__N_SSG:()=>i,default:()=>a});var o=n(7876),l=n(4232),r=n(8851),s=n(7819);let c=e=>{let{headings:t}=e,[n,r]=(0,l.useState)(""),s=(0,l.useRef)(null),c=(0,l.useRef)(null);return(console.log("TOC component received headings:",t),(0,l.useEffect)(()=>{if(!t||0===t.length)return;let e=setTimeout(()=>{let e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(console.log("Section in view:",e.target.id),r(e.target.id))})},{rootMargin:"-10% 0px -60% 0px",threshold:.1});return t.forEach(t=>{let n=document.getElementById(t.id);n?(console.log("Observing element:",t.id,n),e.observe(n)):console.log("Element not found for heading:",t.id)}),()=>e.disconnect()},500);return()=>clearTimeout(e)},[t]),(0,l.useEffect)(()=>{if(n&&c.current&&s.current){let e=s.current,t=c.current,o=e.scrollTop,l=t.offsetTop,r=e.clientHeight,i=t.offsetHeight,a=l-r/2+i/2,d=l-o,h=50>Math.abs(d-(r-i)/2);d>=0&&d+i<=r&&h||(console.log("Scrolling TOC to center item:",n,"from",o,"to",a),e.scrollTo({top:Math.max(0,a),behavior:"smooth"}))}},[n]),t&&0!==t.length)?(console.log("TOC: Rendering with headings:",t),console.log("TOC: Active ID:",n),(0,o.jsxs)("nav",{className:"tocContainer",ref:s,children:[(0,o.jsx)("div",{className:"tocTitle",children:"Table of Contents"}),(0,o.jsx)("ul",{className:"tocList",children:t.map((e,t)=>{let l=n===e.id,r=e.level-1;return(0,o.jsx)("li",{className:"tocItem ".concat(l?"tocActive":""),style:{paddingLeft:"".concat(16*r,"px")},ref:l?c:null,children:(0,o.jsx)("a",{href:"#".concat(e.id),className:"tocLink",onClick:t=>{t.preventDefault(),(e=>{let t=document.getElementById(e);t?(console.log("Scrolling to element:",e,t),t.scrollIntoView({behavior:"smooth",block:"start"})):console.log("Element not found for scrolling:",e)})(e.id)},"aria-current":l?"location":void 0,children:e.text})},t)})})]})):(console.log("TOC: No headings found, returning null"),null)};var i=!0;let a=function(e){let{content:t,headings:n}=e;return(0,l.useEffect)(()=>{n&&n.length>0&&n.forEach(e=>{document.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach(t=>{t.textContent.trim()===e.text&&(t.id=e.id)})})},[n]),(0,o.jsxs)(l.Fragment,{children:[(0,o.jsx)(s.A,{}),(0,o.jsxs)("div",{className:"postContainer",children:[(0,o.jsx)(c,{headings:n}),(0,o.jsx)("article",{className:"content",children:(0,o.jsx)(r.$,{children:t})})]})]})}},5461:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/writings/[slug]",function(){return n(4478)}])},6546:e=>{e.exports={nav:"nav_nav__E77In"}},7819:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var o=n(7876),l=n(4232),r=n(8230),s=n.n(r),c=n(6546),i=n.n(c);let a=function(){let[e,t]=(0,l.useState)("light");(0,l.useEffect)(()=>{let e=localStorage.getItem("theme");"dark"===e||"light"===e?(t(e),document.body.setAttribute("data-theme",e)):(t("light"),document.body.setAttribute("data-theme","light"))},[]);let n="dark"===e?"\uD83C\uDF19":"☀️",r=e.charAt(0).toUpperCase()+e.slice(1);return(0,o.jsxs)("nav",{className:i().nav,children:[(0,o.jsx)(s(),{href:"/",as:"/",children:"Home"})," ","|"," ",(0,o.jsx)(s(),{href:"/books",as:"/books",children:"Books"})," ","|"," ",(0,o.jsx)(s(),{href:"/writings",as:"/writings",children:"Notes"})," ","|"," ",(0,o.jsx)("button",{onClick:()=>{let n="dark"===e?"light":"dark";t(n),localStorage.setItem("theme",n),document.body.setAttribute("data-theme",n)},style:{background:"none",border:"none",cursor:"pointer",fontSize:"1.2em",marginLeft:"10px",verticalAlign:"middle"},title:"Theme: ".concat(r),"aria-label":"Toggle dark mode",children:n})]})}}},e=>{e.O(0,[230,851,636,593,792],()=>e(e.s=5461)),_N_E=e.O()}]);