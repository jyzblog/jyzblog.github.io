(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[961],{1490:(e,t,n)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/writings/[slug]",function(){return n(3039)}])},3039:(e,t,n)=>{"use strict";n.r(t),n.d(t,{__N_SSG:()=>d,default:()=>h});var o=n(7876),c=n(4232),l=n(8851),r=n(5594),s=n(5259),i=n.n(s);let a=e=>{let{headings:t}=e,[n,l]=(0,c.useState)(""),r=(0,c.useRef)(null),s=(0,c.useRef)(null);return(console.log("TOC component received headings:",t),(0,c.useEffect)(()=>{if(!t||0===t.length)return;let e=setTimeout(()=>{let e=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&(console.log("Section in view:",e.target.id),l(e.target.id))})},{rootMargin:"-10% 0px -60% 0px",threshold:.1});return t.forEach(t=>{let n=document.getElementById(t.id);n?(console.log("Observing element:",t.id,n),e.observe(n)):console.log("Element not found for heading:",t.id)}),()=>e.disconnect()},500);return()=>clearTimeout(e)},[t]),(0,c.useEffect)(()=>{if(n&&s.current&&r.current){let e=r.current,t=s.current,o=e.scrollTop,c=t.offsetTop,l=e.clientHeight,i=t.offsetHeight,a=c-l/2+i/2,d=c-o,h=50>Math.abs(d-(l-i)/2);d>=0&&d+i<=l&&h||(console.log("Scrolling TOC to center item:",n,"from",o,"to",a),e.scrollTo({top:Math.max(0,a),behavior:"smooth"}))}},[n]),t&&0!==t.length)?(console.log("TOC: Rendering with headings:",t),console.log("TOC: Active ID:",n),(0,o.jsxs)("nav",{className:i().tocContainer,ref:r,children:[(0,o.jsx)("div",{className:i().tocTitle,children:"Table of Contents"}),(0,o.jsx)("ul",{className:i().tocList,children:t.map((e,t)=>{let c=n===e.id,l=e.level-1;return(0,o.jsx)("li",{className:"".concat(i().tocItem," ").concat(c?i().tocActive:""),style:{paddingLeft:"".concat(16*l,"px")},ref:c?s:null,children:(0,o.jsx)("a",{href:"#".concat(e.id),className:i().tocLink,onClick:t=>{t.preventDefault(),(e=>{let t=document.getElementById(e);t?(console.log("Scrolling to element:",e,t),t.scrollIntoView({behavior:"smooth",block:"start"})):console.log("Element not found for scrolling:",e)})(e.id)},"aria-current":c?"location":void 0,children:e.text})},t)})})]})):(console.log("TOC: No headings found, returning null"),null)};var d=!0;let h=function(e){let{content:t,headings:n}=e;return(0,c.useEffect)(()=>{n&&n.length>0&&n.forEach(e=>{document.querySelectorAll("h1, h2, h3, h4, h5, h6").forEach(t=>{t.textContent.trim()===e.text&&(t.id=e.id)})})},[n]),(0,o.jsxs)(c.Fragment,{children:[(0,o.jsx)(r.A,{}),(0,o.jsxs)("div",{className:i().postContainer,children:[(0,o.jsx)(a,{headings:n}),(0,o.jsx)("article",{className:i().content,children:(0,o.jsx)(l.$,{children:t})})]})]})}},5259:e=>{e.exports={toc:"content_toc__Y75L6",postContainer:"content_postContainer__biuUy",tocContainer:"content_tocContainer__ge3eY",tocTitle:"content_tocTitle__cUXHp",tocList:"content_tocList__Du9u2",tocItem:"content_tocItem__r2uO4",tocLink:"content_tocLink__hAKAJ",tocActive:"content_tocActive__TyR7B",content:"content_content___V5S_",post:"content_post__bxo0p",hashtags:"content_hashtags__6W0yf",title:"content_title__8Az5E"}},5594:(e,t,n)=>{"use strict";n.d(t,{A:()=>a});var o=n(7876),c=n(4232),l=n(8230),r=n.n(l),s=n(8347),i=n.n(s);let a=function(){let[e,t]=(0,c.useState)("light");(0,c.useEffect)(()=>{let e=localStorage.getItem("theme");"dark"===e||"light"===e?(t(e),document.body.setAttribute("data-theme",e)):(t("light"),document.body.setAttribute("data-theme","light"))},[]);let n="dark"===e?"\uD83C\uDF19":"☀️",l=e.charAt(0).toUpperCase()+e.slice(1);return(0,o.jsxs)("nav",{className:i().nav,children:[(0,o.jsx)(r(),{href:"/",as:"/",children:"Home"})," ","|"," ",(0,o.jsx)(r(),{href:"/books",as:"/books",children:"Books"})," ","|"," ",(0,o.jsx)(r(),{href:"/writings",as:"/writings",children:"Notes"})," ","|"," ",(0,o.jsx)("button",{onClick:()=>{let n="dark"===e?"light":"dark";t(n),localStorage.setItem("theme",n),document.body.setAttribute("data-theme",n)},style:{background:"none",border:"none",cursor:"pointer",fontSize:"1.2em",marginLeft:"10px",verticalAlign:"middle"},title:"Theme: ".concat(l),"aria-label":"Toggle dark mode",children:n})]})}},8347:e=>{e.exports={nav:"nav_nav__E77In"}}},e=>{e.O(0,[230,851,636,593,792],()=>e(e.s=1490)),_N_E=e.O()}]);